---
title: "Next.jsãƒ™ãƒ¼ã‚¹ã®é™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼NextraãŒéå¸¸ã«ä¾¿åˆ©ã ã£ãŸè©±"
emoji: "ğŸ“Œ"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["react", "markdown", "next"]
published: true
---

[steelydylan](https://twitter.com/steelydylan)ã§ã™ã€‚ãŸã¾ã«OSSã‚’é–‹ç™ºã™ã‚‹æ©Ÿä¼šãŒã‚ã‚‹ã®ã§ã™ãŒã€ä»¥å‰OSSã‚’å…¬é–‹ã™ã‚‹æ™‚ã«[VuePress](https://vuepress.vuejs.org/)ã®ã‚ˆã†ãªæ°—è»½ãªé™çš„ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ãŒReactã«ã‚‚ã‚ã£ãŸã‚‰ã„ã„ã®ã«ã¨æ¢ã—ã¦ã„ã¾ã—ãŸã€‚
ãã®æ™‚ã«`Nextra`ã¨ã„ã†ã¨ã¦ã‚‚ç´ æ•µãªãƒ„ãƒ¼ãƒ«ã‚’è¦‹ã¤ã‘ãŸã®ã§ç´¹ä»‹ã•ã›ã¦ãã ã•ã„ã€‚

https://github.com/shuding/nextra

# Nextraã¨ã¯

Nextraã®å…¬å¼ã‚µã‚¤ãƒˆã«è¡Œã‘ã°ã‚ã‹ã‚‹ã“ã¨ã§ã™ãŒæ—¥æœ¬èªã§ç°¡å˜ã«è§£èª¬ã•ã›ã¦ãã ã•ã„ã€‚
Nextraã¯ã€Next.jsã¨MDXã§å‹•ä½œã™ã‚‹ã‚¹ã‚¿ãƒ†ã‚£ãƒƒã‚¯ã‚µã‚¤ãƒˆã‚¸ã‚§ãƒãƒ¬ãƒ¼ã‚¿ãƒ¼ã§ã™ã€‚å®Ÿéš›ã«Next.jsã‚’é–‹ç™ºã—ã¦ã„ã‚‹Vercelã§åƒã‹ã‚Œã¦ã„ã‚‹[shuding](https://github.com/shuding)ã¨ã„ã†æ–¹ãŒä½œã‚‰ã‚Œã¦ã„ã‚‹ã®ã§ä¿¡é ¼æ€§ã¯é«˜ãã†ã§ã™ã€‚

ä¾‹ãˆã°ã€Reactã®ãƒ‡ãƒ¼ã‚¿ãƒ•ã‚§ãƒƒãƒç”¨ã®hooksã§ã‚ã‚‹SWRã¨ã„ã†ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ã‚µã‚¤ãƒˆã‚‚Nextraã§ä½œã‚‰ã‚Œã¦ã„ã¾ã™ã€‚

https://swr.vercel.app/

Nextraã‚’ä½¿ãˆã°ã€Next.jsã‚’çŸ¥ã£ã¦ã„ã‚‹äººã¯ã•ã‚‰ã«ä¾¿åˆ©ã«ä½¿ãˆã¾ã™ãŒçŸ¥ã‚‰ãªãã¦ã‚‚ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’ã‹ã‘ã‚‹ã ã‘ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‹ã‘ã¡ã‚ƒã„ã¾ã™ã€‚è‡ªåˆ†ã‚‚Nextraã‚’ä½¿ã£ã¦ã€ä»¥å‰å…¬é–‹ã—ãŸOSSã®ç´¹ä»‹ã‚µã‚¤ãƒˆã¨ã—ã¦Nextraã‚’ä½¿ã£ã¦ã¾ã™ãŒã€ã»ã¼ã»ã¼ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã§ã—ãŸï¼

https://react-split-mde.vercel.app/

ã¾ãŸã€Next.jsã§å‹•ä½œã™ã‚‹ãŸã‚ã€Vercelã‚’ä½¿ãˆã°Githubã«pushã™ã‚‹ã ã‘ã§ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå…¬é–‹ã§ãã‚‹ã¨ã„ã†ãƒ¡ãƒªãƒƒãƒˆã‚‚ã‚ã‚Šã¾ã™ã€‚

https://vercel.com/


æ—©é€Ÿä½¿ã„æ–¹ã‚’ç´¹ä»‹ã—ã¡ã‚ƒã„ã¾ã™ï¼


# ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

```sh
$ yarn add next react react-dom
$ yarn add nextra nextra-theme-docs
```

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

ã¾ãšã¯ã€è„³æ­»ã§next.config.jsã«ä»¥ä¸‹ã®æ§˜ã«è¨˜è¿°ã—ã¾ã™ã€‚ã“ã‚Œã§Next.jsä¸Šã§nextraã‚’å‹•ã‹ã™ç’°å¢ƒãŒèª¿ã„ã¾ã™ã€‚

```js:next.config.js
// next.config.js
const withNextra = require('nextra')('nextra-theme-docs', './theme.config.js')
module.exports = withNextra({
  webpack: config => {
    config.module.rules.push({
      test: /\.txt$/i,
      use: "raw-loader",
    })
    return config
  }
})
```

æ¬¡ã«ã€å…¬é–‹ã—ãŸã„ã‚µã‚¤ãƒˆã®ãƒ¡ã‚¿æƒ…å ±ãªã©ã‚’ `theme.config.js` ã«è¨˜è¿°ã—ã¾ã™ã€‚ä»¥å‰ç§ãŒå…¬é–‹ã—ãŸã€[React Split MDE](https://github.com/steelydylan/react-split-mde)ã®ãƒ†ãƒ¼ãƒè¨­å®šã¯ä»¥ä¸‹ã®æ§˜ãªæ„Ÿã˜ã§ã—ãŸã€‚

```jsx
// theme.config.js
export default {
  repository: 'https://github.com/steelydylan/zenn-mde', // project repo
  docsRepository: 'https://github.com/steelydylan/zenn-mde-site', // docs repo
  branch: 'master', // branch of docs
  path: '/', // path of docs
  titleSuffix: ' â€“ React Split MDE',
  nextLinks: true,
  prevLinks: true,
  search: true,
  customSearch: null, // customizable, you can use algolia for example
  darkMode: true,
  footer: true,
  footerText: 'MIT 2020 Â© steelydylan.',
  footerEditOnGitHubLink: true, // will link to the docs repo
  logo: <>
    <svg>...</svg>
    <span>React Split MDE</span>
  </>,
  head: <>
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="React Split MDE: the next markdown editor" />
    <meta name="og:title" content="React Split MDE: the next markdown editor" />
  </>
}
```

ã¾ãŸã€nextraã®CSSã‚’é©ç”¨ã—ãŸã„æ–¹ã¯`pages/_app.js`ã«ä»¥ä¸‹ã®æ§˜ã«è¨˜è¿°ã—ã¾ã™ã€‚

```jsx
import 'nextra-theme-docs/style.css'

export default function Nextra({ Component, pageProps }) {
  return <Component {...pageProps} />
}
```

ã‚ã¨ã¯ã€package.jsonã®`scripts`ã«ä»¥ä¸‹ã®æ§˜ãªè¨˜è¿°ã‚’è¿½åŠ ã—ã€`yarn start`ã¨ã‚³ãƒãƒ³ãƒ‰ã‚’å…¥åŠ›ã™ã‚‹ã“ã¨ã§ç¢ºèªã—ãªãŒã‚‰è¨˜äº‹ãŒæ›¸ã‘ã¾ã™ï¼

```json: package.json
...
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "dev": "next",
    "start": "next start",
    "build": "next build"
  },
...
```

# è¨˜äº‹ã‚’æ›¸ã

`pages/**/***.mdx` ã¨ã—ã¦ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­ç½®ã—ã¾ã™ã€‚æ‹¡å¼µå­ãŒ `mdx`ã§ã‚ã‚‹ã“ã¨ã«è¦æ³¨æ„ã§ã™ã€‚é€šå¸¸ã€Next.jsã§ã¯ã€jsxã‚„tsxãªã©ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’`pages`ä»¥ä¸‹ã«é…ç½®ã™ã‚‹ã¨æ€ã†ã®ã§ã™ãŒã€ã“ã®`mdx`ãŒãƒšãƒ¼ã‚¸ã®ä»£ã‚ã‚Šã¨ãªã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚ã“ã®`mdx`ã«ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§ãã®ã¾ã¾ãã®ãƒ•ã‚¡ã‚¤ãƒ«åãŒURLã¨ãªã‚Šã¾ã™ã€‚ãŸã¨ãˆã°ã€`pages/advanced.mdx`ã¨ã„ã†åå‰ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­ç½®ã™ã‚‹ã¨ã€https://example.com/advanced ã¨ã„ã†URLã§è¨˜è¿°ã—ãŸãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®å†…å®¹ãŒç¢ºèªã§ãã¾ã™ã€‚
https://example.com ã«ã‚ãŸã‚‹URLã«ã¯ `pages/index.mdx` ã¨ã—ã¦ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è¨­ç½®ã—ã¾ã™ã€‚

## Frontmatter
ã¾ãŸã€ä»¥ä¸‹ã®æ§˜ãªFrontmatterã‚‚ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã®å…ˆé ­ã«è¨˜è¿°ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```
---
title: Introduction
---
```

ã¾ãŸä»¥ä¸‹ã®æ§˜ã«Frontmatterã« `full: true`ã¨è¨˜è¿°ã—ã€ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå¹…ã‚’èª¿æ•´ã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ã§ã™ã€‚

```
---
title: Introduction
full: true
---
```

## JSX

ã¾ãŸmdxã§ã¯ä»¥ä¸‹ã®æ§˜ã«JSã‚‚æ™®é€šã«è¨˜è¿°ã§ãã‚‹ã®ã§ã€Next.jsãªã‚‰`SSR`ã‚„`ISR`ã¨ã„ã£ãŸã“ã¨ã‚‚ç°¡å˜ã«ã§ãã¡ã‚ƒã„ã¾ã™ã€‚
ã“ã‚Œã¯æ„Ÿå‹•ã§ã™ã€‚ã€‚ã€‚

```jsx
import Markdown from 'markdown-to-jsx'
import { useSSG } from 'nextra/ssg'

export const getStaticProps = ({ params }) => {
  return fetch('https://api.github.com/repos/steelydylan/react-split-mde/releases')
    .then(res => res.json())
    // we keep the most recent 5 releases here
    .then(releases => ({ props: { ssg: releases.slice(0, 5) }, revalidate: 10 }))
}

export const ReleasesRenderer = () => {
  const releases = useSSG()
  return <Markdown>{
    releases.map(release => {
      const body = release.body
        .replace(/&#39;/g, "'")
        .replace(/@([a-zA-Z0-9_-]+)(?=(,| ))/g, '<a href="https://github.com/$1" target="_blank" rel="noopener">@$1</a>')
      return `## <a href="${release.html_url}" target="_blank" rel="noopener">${release.tag_name}</a> 
Published on ${new Date(release.published_at) .toDateString()}.\n\n${body}`}).join('\n\n')
  }</Markdown>
}

# Change Log

Please visit the [React Split MDE](https://github.com/steelydylan/react-split-mde/releases) for all history releases.

<ReleasesRenderer/>
```

# è¨˜äº‹ã®é †ç•ªã‚’æ±ºã‚ã‚‹

`meta.json`ã‚’`pages`ä»¥ä¸‹ã®ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«è¨­ç½®ã™ã‚‹ã“ã¨ã§è¨˜äº‹ã®é †ç•ªã‚’æ±ºã‚ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚
ã‚­ãƒ¼åã«è¨˜äº‹ã®ã‚¹ãƒ©ã‚°ã€ãƒãƒªãƒ¥ãƒ¼ã«è¨˜äº‹ã®ã‚¿ã‚¤ãƒˆãƒ«ã¨ã„ã£ãŸå…·åˆã§ã™ã€‚

```json:meta.json
{
  "index": "Introduction",
  "getting-started": "Getting Started",
  "docs": "Docs",
  "advanced": "Advanced",
  "change-log": "Change Log"
}
```

# ã¾ã¨ã‚

ä»¥ä¸Šã€Nextraã®ç´¹ä»‹ã§ã—ãŸã€‚è‡ªä½œã®OSSã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’ã‚µã‚¯ãƒƒã¨ä½œã‚ŠãŸã„æ™‚ãªã©ã«éå¸¸ã«é‡å®ã™ã‚‹ã¨å€‹äººçš„ã«ã¯æ€ã£ã¦ã„ã¾ã™ã€‚ä»Šå¾Œã€OSSã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆä½œæˆãŒä»Šä»¥ä¸Šã«æ—ã‚Šãã†ã§ã™ï¼

ã¾ãŸã€ä»Šå›ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¯Githubã«å…¬é–‹ã—ã¦ã„ã‚‹ã®ã§å‚è€ƒã«ã—ãŸã„æ–¹ã¯ã©ã†ã

https://github.com/steelydylan/react-split-mde-site

